<!DOCTYPE html>
<html>
<head>
    <title>Notification Window</title>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" type="text/javascript"></script>
    <script id="achievement-pop-script">
        function adjustFont() {
            var nameValue = 100;
            var descriptionValue = 100;

            var focusName = document.getElementById('achievement-pop-name');
            var focusDescriptionElement = document.getElementById('achievement-pop-description');

            focusName.style.fontSize = nameValue + 'px';
            focusDescriptionElement.style.fontSize = descriptionValue + 'px';

            while (focusName.scrollHeight > focusName.offsetHeight) {
                nameValue--;
                focusName.style.fontSize = nameValue + 'px';
            }

            while (focusDescriptionElement.scrollHeight > focusDescriptionElement.offsetHeight) {
                descriptionValue--;
                focusDescriptionElement.style.fontSize = descriptionValue + 'px';
            }
        }

        function setFontFamily(value, bolded) {
            var all = document.getElementsByClassName('has-font');

            for (var i = 0; i < all.length; i++) {
                all[i].style.fontFamily = "\"" + value + "\"";
                all[i].style.fontWeight = bolded ? "bold" : "normal";
            }

            adjustFont();
        }

        function setFontColor(value) {
            var all = document.getElementsByClassName('has-font');

            for (var i = 0; i < all.length; i++) {
                all[i].style.color = value;
            }
        }

        function setFontOutline(value) {
            var all = document.getElementsByClassName('has-font');

            for (var i = 0; i < all.length; i++) {
                all[i].style.webkitTextStroke = value;
            }

            adjustFont();
        }

        function setBackgroundColor(color) {
            document.getElementById("achievement-pop").style.backgroundColor = color;
        }

        function promptUser() {
            $("#user-prompt").fadeIn();
        }

        function achievementNotification(achievementName, achievementBadge, achievementDescription, achievementPoints) {
            $("#achievement-pop-name").text(achievementName);
            $("#achievement-pop-description").text(achievementDescription);
            $("#achievement-pop-points").text(achievementPoints);
            $("#achievement-pop-badge").attr("src", achievementBadge);

            $("#achievement-pop").attr('src', 'disk://default-achievement-pop');

            $("#achievement-pop-video").attr("src", "disk://video/default-achievement-notification.webm");

            document.getElementById('achievement-pop-video').addEventListener('ended', (event) => {
                hideAchievementPopUp();
                document.getElementById('achievement-pop-video').style.display = 'hidden';
            });

            $("#achievement-pop").fadeIn();
            $("#achievement-pop-badge").fadeIn();
            $("#achievement-pop-name").fadeIn();
            $("#achievement-pop-points").fadeIn();
            $("#achievement-pop-video").fadeIn();
            $("#achievement-pop-description").fadeIn();

            adjustFont();
        }

        function hideAchievementPopUp() {
            $("#achievement-pop").fadeOut();
            $("#achievement-pop-badge").fadeOut();
            $("#achievement-pop-name").fadeOut();
            $("#achievement-pop-points").fadeOut();
            $("#achievement-pop-description").fadeOut();
        }
    </script>
    <script id="mastery-pop-script">

        function masteryNotification(gameName, gameImageLoc, gameAchievementCount, gamePoints) {

            $("#mastery-pop-name").text(gameName);
            $("#mastery-pop-achievements").text('Cheevos: ' + gameAchievementCount);
            $("#mastery-pop-points").text('Points: ' + gamePoints);

            $("#mastery-pop-badge").attr("src", gameImageLoc);
            $("#mastery-pop-badge").attr('border', '5');

            $("#achievement-pop").attr("src", "disk://default-achievement-pop");
            $("#achievement-pop").attr('border', '5');

            $("#mastery-pop-video").attr("src", "disk://video/default-mastery-notification.webm");
            document.getElementById('mastery-pop-video').addEventListener('ended', (event) => {
                hideMasteryPopUp();
                document.getElementById('mastery-pop-video').style.display = 'none';
            });

            setTimeout(function () {
                $("#mastery-pop").fadeIn();
                $("#mastery-pop-badge").fadeIn();
                $("#mastery-pop-name").fadeIn();
                $("#mastery-pop-achievements").fadeIn();
                $("#mastery-pop-points").fadeIn();
                $("#mastery-pop-video").fadeIn();
            }, 200);
        }

        function hideMasteryPopUp() {
            $("#mastery-pop").fadeOut();
            $("#mastery-pop-badge").fadeOut();
            $("#mastery-pop-name").fadeOut();
            $("#mastery-pop-achievements").fadeOut();
            $("#mastery-pop-points").fadeOut();
        }

    </script>
    <style id="achievement-pop-style" type="text/css">
        @keyframes achievement-pop-animation {
            0% {
                left: -1392px;
                top: 215px;
            }

            8% {
                left: 230px;
            }

            94% {
                top: 215px;
            }

            100% {
                left: 230px;
                top: -310px;
            }
        }

        #achievement-pop,
        #mastery-pop {
            animation-name: achievement-pop-animation;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
            animation-duration: 5800ms;
        }

        #achievement-pop-name,
        #mastery-pop-name {
            position: relative;
            top: 12px;
            width: 975px;
            height: 60px;
            text-align: center;
            display: none;
        }

        #achievement-pop-badge,
        #mastery-pop-badge {
            left: 2px;
            height: 145px;
            display: none;
        }

        #achievement-pop-description {
            position: relative;
            float: right;
            width: 805px;
            height: 140px;
            text-align: center;
            display: none;
        }

        #achievement-pop-video,
        #mastery-pop-video {
            left: -15px;
            top: 5px;
        }
    </style>
    <style id="mastery-pop-style" type="text/css">
        #mastery-pop-achievements,
        #mastery-pop-points {
            position: relative;
            float: right;
            width: 400px;
            height: 140px;
            text-align: center;
            display: none;
        }
    </style>
    <style id="all-styles">
        .has-font {
            font-size: 48px;
            color: black;
            background: rgba(0, 0, 0, 0.0);
            font-family: Calibri;
            -webkit-text-stroke: 2px white;
            overflow-wrap: normal;
        }

        #achievement-pop-video,
        #mastery-pop-video {
            position: absolute;
        }

        @keyframes user-prompt-animation {
            0% {
                left: 400px;
                top: -290px;
            }

            100% {
                left: 400px;
                top: 100px;
            }
        }

        @keyframes user-prompt-animation-reverse {
            0% {
                left: 400px;
                top: 100px;
            }

            100% {
                left: 400px;
                top: -290px;
            }
        }

        #user-prompt {
            animation-name: user-prompt-animation;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
            animation-duration: 1s;
        }

        #achievement-pop,
        #mastery-pop {
            position: relative;
            top: 250px;
            left: 250px;
            width: 1000px;
            height: 235px;
            background-image: url('disk://default-background');
            background-repeat: no-repeat;
            background-color: #cccccc;
            background-size: cover;
            display: none;
        }

        #container
        {
            position: absolute;
        }
    </style>
    <script>
        function acknowledgePrompt() {
            document.getElementById("user-prompt").style.animationName = "user-prompt-animation-reverse";

            setTimeout(function () {
                var element = document.getElementById("user-prompt");
                element.parentNode.removeChild(element);
            }, 1000);
        };
    </script>
</head>
<body>
    <div id="container" style="background: magenta; width: 1925px; height: 1085px; top: -5px; left: -5px;">
        <div id="user-prompt" style="position: absolute; width: 400px; height: 200px;background-color: lightskyblue; left: 400px; top: 100px; text-align: center; display: none;">
            <div style="position: relative;top: 50px;text-align: center;font-weight: bold;vertical-align: middle; font-size: 42px;">
                Are you ready?<br />
                <button id="confirm-button" style="text-align: center;font-weight: bold;vertical-align: middle;font-size: 24px;" onclick="acknowledgePrompt()">
                    Yes
                </button>
            </div>
        </div>

        <video id="achievement-pop-video" autoplay></video>
        <video id="mastery-pop-video" autoplay></video>

        <div id="achievement-pop">
            <div id="achievement-pop-name" class="has-font"></div>
            <span id="description-span" style="display: table-cell; position: relative; vertical-align: top; width: 975px; left: 10px; top: 15px; overflow: hidden;">
                <img id="achievement-pop-badge" />
                <a id="achievement-pop-description" class="has-font"></a>
            </span>
            <div id="achievement-pop-points" class="has-font"></div>
        </div>

        <div id="mastery-pop">
            <div id="mastery-pop-name" class="has-font"></div>
            <span id="mastery-span" style="display: table-cell; position: relative; vertical-align: top; width: 975px; left: 10px; top: 15px; overflow: hidden;">
                <img id="mastery-pop-badge" />
                <div id="mastery-pop-achievements" class="has-font"></div>
                <div id="mastery-pop-points" class="has-font"></div>
            </span>
        </div>
    </div>
</body>
</html>
